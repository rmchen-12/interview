### 错误原因
1. 逻辑错误
2. 数据类型错误
3. 语法语句错误
4. 网络错误
5. 系统错误

### 需要采集的内容
1. 用户信息 用户的权限、状态等
2. 行为信息 进行了什么操作、界面路径、api给了什么数据
3. 异常信息 异常类型，堆栈信息
4. 环境信息 网络环境；设备型号和标识码；操作系统版本；客户端版本；API接口版本

### 异常捕获
1. window.addEventListener(‘error’)捕获同步异步错误，无法捕获promise / window.addEventListener(“unhandledrejection”)捕获promise错误 / document.addEventListener(‘click’) 等
2. 框架级别的全局监听，例如aixos中使用interceptor进行拦截，vue、react都有自己的错误采集接口
3. 通过对全局函数进行封装包裹，实现在调用该函数时自动捕获异常
4. 对实例方法重写（Patch），在原有功能基础上包裹一层，例如对console.error进行重写，在使用方法不变的情况下也可以异常捕获

### 单点捕获
1. try…catch
2. 专门写一个函数来收集异常信息，在异常发生时，调用该函数
3. 专门写一个函数来包裹其他函数，得到一个新函数，该新函数运行结果和原函数一模一样，只是在发生异常时可以捕获异常

### 整理与上报方案(避免频繁提交错误)
1. 我们先将这些日志存储在用户客户端本地，达到一定条件之后，再同时打包上传一组日志(IndexedDB支持异步，能存500M数据)
2. 感觉错误等级分为及时上报，批量上报，用户反馈

### 使用sentry上报