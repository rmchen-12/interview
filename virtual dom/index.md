### DOM操作的缺陷
1. 操作DOM会引起重排
2. 强制同步布局和布局抖动
3. 复杂单页应用，操作非常昂贵

### 主要思想：
模拟DOM的树状结构，在内存中创建保存映射DOM信息的节点数据，在由于交互等因素需要视图更新时，先通过对节点数据进行diff后得到差异结果后，再一次性对DOM进行批量更新操作，这就好比在内存中创建了一个平行世界，浏览器中DOM树的每一个节点与属性数据都在这个平行世界中存在着另一个版本的虚拟DOM树，所有复杂曲折的更新逻辑都在平行世界中的VirtualDOM处理完成，只将最终的更新结果发送给浏览器中的DOM树执行，这样就避免了冗余琐碎的DOM树操作负担，进而有效提高了性能。

### diff算法：
 如何识别并保存新旧节点数据结构之间差异的方法

### diff主要策略：
- 按tree层级diff(level by level)：数据结构是以DOM渲染为目标的模拟树状层级结构的节点数据，而在WebUI中很少出现DOM的层级结构因为交互而产生更新，因此VirtualDOM的diff策略是在新旧节点树之间按层级进行diff得到差异，而非传统的按深度遍历搜索，这种通过大胆假设得到的改进方案，不仅符合实际场景的需要，而且大幅降低了算法实现复杂度，从O(n^3)提升至O(n)。
- 按类型进行diff：无论VirtualDOM中的节点数据对应的是一个原生的DOM节点还是vue或者react中的一个组件，不同类型的节点所具有的子树节点之间结构往往差异明显，因此对不同类型的节点的子树进行diff的投入成本与产出比将会很高昂，为了提升diff效率，VirtualDOM只对相同类型的同一个节点进行diff，当新旧节点发生了类型的改变时，则并不进行子树的比较，直接创建新类型的VirtualDOM，替换旧节点。
- 列表diff：当被diff节点处于同一层级时，通过三种节点操作新旧节点进行更新：插入，移动和删除，同时提供给用户设置key属性的方式调整diff更新中默认的排序方式，在没有key值的列表diff中，只能通过按顺序进行每个元素的对比，更新，插入与删除，在数据量较大的情况下，diff效率低下，如果能够基于设置key标识尽心diff，就能够快速识别新旧列表之间的变化内容，提升diff效率。

### React Fiber架构（让自己的Reconcilation（协调）过程变成可被中断）fiber意为协程，让出进程
#### 优点
-  老的算法是会递归比对VirtualDOM树，找出需要变动的节点，然后同步更新它们, 一气呵成，新的会'适时'地让出CPU执行权，可以让浏览器及时地响应用户的交互
-  与其一次性操作大量 DOM 节点相比, 分批延时对DOM进行操作，可以得到更好的用户体验
-  给浏览器一点喘息的机会，他会对代码进行编译优化（JIT）及进行热代码优化，或者对reflow进行修正

### vue优化每个任务，让它有多快就多快。挤压CPU运算量